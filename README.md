# TechZone Portal - Flask Application

A Flask-based student management system for TechZone Academy with Firebase integration.

## Features

- Student and trainer management
- Batch management
- File uploads and downloads
- Email notifications
- Firebase Firestore database
- Firebase Storage for files

## Deployment on Render

### Prerequisites

1. A Render account
2. Firebase project with Firestore and Storage enabled
3. Gmail account with App Password (for email functionality)

### Step 1: Prepare Firebase Configuration

1. Go to your Firebase Console
2. Navigate to Project Settings > Service Accounts
3. Click "Generate New Private Key"
4. Download the JSON file
5. Convert the JSON content to a single line string (remove newlines and format as one line)

### Step 2: Deploy on Render

1. **Connect your GitHub repository** to Render
2. **Create a new Web Service**
3. **Configure the service:**
   - **Name:** `techzone-portal` (or your preferred name)
   - **Environment:** `Python 3`
   - **Build Command:** `pip install -r requirements.txt`
   - **Start Command:** `gunicorn app:techzone_app --bind 0.0.0.0:$PORT`

### Step 3: Set Environment Variables

In your Render service dashboard, set these environment variables:

#### Required Variables (set `sync: false` for sensitive data):
- `FIREBASE_CONFIG`: Your Firebase service account JSON as a string
- `EMAIL_ADDRESS`: Your Gmail address
- `EMAIL_PASSWORD`: Your Gmail App Password

#### Auto-generated Variables:
- `SECRET_KEY`: Will be auto-generated by Render

#### Optional Variables (with default values):
- `SMTP_SERVER`: `smtp.gmail.com`
- `SMTP_PORT`: `587`
- `DEBUG`: `false`

### Step 4: Deploy

1. Click "Create Web Service"
2. Render will automatically build and deploy your application
3. Wait for the build to complete
4. Your app will be available at the provided URL

## Local Development

1. Clone the repository
2. Install dependencies: `pip install -r requirements.txt`
3. Copy `env_example.txt` to `.env` and fill in your values
4. Run: `python app.py`

## File Structure

```
├── app.py                 # Main application entry point for Render
├── portalflask/          # Main application package
│   ├── AI_firebase.py    # Main Flask application
│   ├── firebase_config.py # Firebase configuration
│   ├── email_config.py   # Email configuration
│   └── templates/        # HTML templates
├── requirements.txt       # Python dependencies
├── render.yaml           # Render deployment configuration
└── runtime.txt           # Python version specification
```

## Troubleshooting

### Common Issues:

1. **Build fails**: Check that all dependencies are in `requirements.txt`
2. **Firebase connection error**: Verify `FIREBASE_CONFIG` environment variable
3. **Email not working**: Check Gmail App Password and 2FA settings
4. **Port binding error**: Ensure `gunicorn` start command is correct

### Logs:

Check Render service logs for detailed error information.

## Support

For issues related to:
- **Render deployment**: Check Render documentation and logs
- **Firebase**: Verify your Firebase project configuration
- **Email**: Ensure Gmail App Password is correctly set
